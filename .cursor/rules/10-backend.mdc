---
description: Backend rule for be-agency-order-courage. Prefer state-machine / rules-first design; keep APIs minimal.
globs: be-agency-order-courage/**
alwaysApply: false
---

# Backend Guidance (be-agency-order-courage)

## Architectural intent
- Build a "life engine" first: state transitions, quest graph, time behavior.
- UI and endpoints are views into the engine, not the source of truth.

## Implementation priorities
1) Domain models (CharacterState, QuestNode, QuestRun, Flags)
2) Deterministic state transitions (pure functions where possible)
3) Persistence layer (simple, explicit)
4) API routes last

## Anti-patterns
- Don’t encode game meaning in UI strings or ad-hoc route logic.
- Don’t add endpoints “because we might need them later.”

